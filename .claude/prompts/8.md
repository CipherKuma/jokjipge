# Prompt 8: End-to-End Testing + Demo

## Objective
Test the complete flow and prepare for demo.

## Prerequisites
- Contracts deployed on Polygon Amoy
- Subgraph synced
- Frontend running

## Test Flow

### 1. Create Test Market (Admin)
Using Foundry or frontend admin:

```bash
# Using cast
cast send $MARKET_FACTORY "createMarket(string,string,uint256)" \
  "Will ETH reach \$5k by March 2025?" \
  "crypto" \
  $(date -v+30d +%s) \
  --rpc-url $AMOY_RPC --private-key $PRIVATE_KEY
```

Verify:
- [ ] Market appears in subgraph
- [ ] Market shows on frontend home page

### 2. Place Bet (User)
1. Connect wallet with POL balance
2. Navigate to market detail
3. Select YES outcome
4. Enter 1 POL
5. Confirm transaction
6. Verify:
   - [ ] Bet transaction succeeds
   - [ ] Position shows in subgraph
   - [ ] Odds updated
   - [ ] Bet shows in My Bets

### 3. Place Counter Bet
1. Use different account
2. Bet on NO
3. Verify odds shift

### 4. Resolve Market (Admin)
```bash
cast send $MARKET_FACTORY "resolveMarket(uint256,uint8)" \
  0 1 \  # marketId=0, outcome=YES
  --rpc-url $AMOY_RPC --private-key $PRIVATE_KEY
```

Verify:
- [ ] Market status = RESOLVED
- [ ] Winner shows claimable amount

### 5. Claim Winnings
1. Go to My Bets
2. See claimable winnings section
3. Click Claim
4. Verify:
   - [ ] Transaction succeeds
   - [ ] Balance increased
   - [ ] Position marked claimed

## Demo Script

### Scene 1: Home Page (15s)
- Show markets grid
- Point out stats bar
- Show live activity feed

### Scene 2: Market Detail (30s)
- Click into a market
- Explain odds display
- Show payout calculator

### Scene 3: Place Bet (45s)
- Connect wallet
- Select YES
- Enter amount
- Show potential payout
- Confirm transaction
- Wait for confirmation
- Show updated odds

### Scene 4: Dashboard (30s)
- Navigate to My Bets
- Show P&L summary
- Show active positions
- Show bet history

### Scene 5: Claim (30s)
- Show resolved market
- Click claim
- Show funds received

### Closing (10s)
- "조작 없는 예측 마켓. Jokjipge"

## Seed Data for Demo
Create 4-5 markets with varied:
- Categories: crypto, sports, entertainment
- Odds: some 50/50, some skewed
- Resolution dates: some ending soon, some far

## Verification Checklist
- [ ] All pages load without errors
- [ ] Wallet connects successfully
- [ ] Can place bets
- [ ] Dashboard shows data
- [ ] Can claim winnings
- [ ] Activity feed updates
- [ ] Mobile responsive
- [ ] No console errors
